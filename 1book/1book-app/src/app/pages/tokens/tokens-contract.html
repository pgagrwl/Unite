<div class="form-container">
  <h3>ğŸ” Token Details Lookup (by Contract)</h3>

  <div class="form-group">
    <label for="providerSelect">Data Provider:</label>
    <select
      [(ngModel)]="selectedProvider"
      id="providerSelect"
      (change)="fetchTokenData()"
    >
      <option value="coingecko">CoinGecko</option>
      <option value="coinmarketcap">CoinMarketCap</option>
    </select>
  </div>

  <div class="form-group">
    <label for="chainSelect">Blockchain Network:</label>
    <select
      [(ngModel)]="selectedChainId"
      id="chainSelect"
      (change)="fetchTokenData()"
    >
      <option [ngValue]="null">-- Select a Chain --</option>
      <option *ngFor="let chain of chains" [value]="chain.id">
        {{ chain.network }}
      </option>
    </select>
  </div>

  <div class="form-group">
    <label for="contractAddress">Contract Address:</label>
    <input
      id="contractAddress"
      type="text"
      [(ngModel)]="contractAddress"
      (ngModelChange)="debounceInput()"
      placeholder="0x..."
    />
  </div>
</div>

<hr />

<div *ngIf="loading">ğŸ”„ Loading token data...</div>

<div *ngIf="responseData?.success" class="token-ui">
  <div class="token-header">
    <h2>
      {{ responseData.result.assets.name }}
      <span class="symbol">({{ responseData.result.assets.symbol }})</span>
    </h2>
    <p class="status" [ngClass]="responseData.result.assets.status">
      Status: {{ responseData.result.assets.status | titlecase }}
    </p>
    <p class="type">Type: {{ responseData.result.assets.type }}</p>
    <p><strong>Decimals:</strong> {{ responseData.result.assets.decimals }}</p>
  </div>

  <p class="description">
    {{ responseData.result.assets.description }}
  </p>

  <p *ngIf="responseData.result.assets.explorer">
    <strong>Explorer:</strong>
    <a [href]="responseData.result.assets.explorer" target="_blank">
      {{ responseData.result.assets.explorer }}
    </a>
  </p>

  <p *ngIf="responseData.result.assets.website">
    <strong>Website:</strong>
    <a [href]="responseData.result.assets.website" target="_blank">
      {{ responseData.result.assets.website }}
    </a>
  </p>

  <div *ngIf="responseData.result.assets.tags?.length">
    <strong>Tags:</strong>
    <span class="tag" *ngFor="let tag of responseData.result.assets.tags">
      {{ tag }}
    </span>
  </div>

  <div class="market-data">
    <h4>ğŸ“Š Market Overview</h4>
    <p>
      <strong>Circulating Supply:</strong>
      {{ responseData.result.details.circulatingSupply | number }}
    </p>
    <p>
      <strong>Total Supply:</strong>
      {{ responseData.result.details.totalSupply | number }}
    </p>
    <p>
      <strong>24h Volume:</strong> ${{
        responseData.result.details.vol24 | number : "1.0-0"
      }}
    </p>
    <p>
      <strong>Market Cap:</strong> ${{
        responseData.result.details.marketCap | number : "1.0-0"
      }}
    </p>
  </div>

  <p class="provider">
    Data from
    <a [href]="responseData.result.details.providerURL" target="_blank">
      {{ responseData.result.details.provider | titlecase }}
    </a>
  </p>

  <div *ngIf="responseData.result.assets.links?.length">
    <h4>ğŸ”— Related Links</h4>
    <ul>
      <li *ngFor="let link of responseData.result.assets.links">
        <a [href]="link.url" target="_blank">{{ link.name | titlecase }}</a>
      </li>
    </ul>
  </div>
</div>
